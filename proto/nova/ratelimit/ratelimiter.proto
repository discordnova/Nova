syntax = "proto3";

package nova.ratelimit.ratelimiter;

service Ratelimiter {
    rpc SubmitTicket(stream BucketSubmitTicketRequest) returns (stream BucketSubmitTicketResponse);
}

message BucketSubmitTicketRequest {
    oneof data {
        string path = 1;
        Headers headers = 2;
    }

    message Headers {
        map<string, string> headers = 1;
        uint64 precise_time = 2;
    }
    
}

message BucketSubmitTicketResponse {
    int64 accepted = 1;
}
